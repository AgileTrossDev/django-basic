from hamcrest import assert_that, equal_to

from ccsds import bch


def test_bch():
    # test_case = "test_bch"
    # print("\n\nExecuting Test Case: ", test_case)

    examples = [
        [bytearray.fromhex('2178040F001000'), 0xA2],
        [bytearray.fromhex('C0010004090102'), 0x26],
        [bytearray.fromhex('FFFF5555555555'), 0xD0],
        [bytearray.fromhex('11223344'), 0xAE],  # L40 codeblock case
        [bytearray.fromhex('1122334455'), 0xC2],  # L48 codeblock case
        [bytearray.fromhex('112233445566'), 0x52]  # L56 codeblock case
    ]

    for ex in examples:
        assert_that(bch.block_parity(ex[0]), equal_to(ex[1]),
                    "failed with 0x{} and 0x{:02X}".format(ex[0].hex(), ex[1]))
