from construct import BitStruct
from construct import BitsInteger
from construct import Flag
from construct import Bytes

###############################################################################
# TC Codeblock Structure
# Reference: Figure 4.1-12
###############################################################################
tc_header_format = BitStruct(
    "version" / BitsInteger(2),      # 2 bit
    "by_pass_flag" / Flag,           # 1 BIT
    "cntrl_cmd_flag" / Flag,         # 1 BIT
    "spare_1" / BitsInteger(2),      # 2 BIT
    "scid" / BitsInteger(10),      # 10 bit
    "vcid" / BitsInteger(6),         # 6 Bits,
    "frm_length" / BitsInteger(10),  # 10 Bits
    "nesn" / BitsInteger(8),         # 8 Bits
)


###############################################################################
# TC Packet Structure
# Reference: CCSDS 203.0-B-1 Fig. 5-1 Telecommand Packet Format
###############################################################################
tc_pkt_header_format = BitStruct(
    
    # Packet Identification
    "version" / BitsInteger(3),             # 3  Bits
    "type" / BitsInteger(1),                # 1  Bits
    "sec_hdr_flag" / BitsInteger(1),        # 1  Bits
    "applic_process_id" / BitsInteger(11),  # 11 Bits
        
    # Packet Sequence Control
    "seq_flags" / BitsInteger(2),           # 2  Bits
    "seq_cnt" / BitsInteger(14),            # 14 Bits
    "pkt_len" / BitsInteger(16),            # 16 Bits
    
)